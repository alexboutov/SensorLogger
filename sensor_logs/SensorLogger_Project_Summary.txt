SensorLogger Project Summary - Context & Decisions Log

PROJECT SNAPSHOT
minSdk=26
targetSdk=34
jdk=17
binding=viewBinding
dataBinding=false
compose=false
material=true
activityKtx=true

SESSION REQUESTS

(fill in at start of next session)

CHANGES SINCE LAST SUMMARY

UI updated: replaced two separate START/STOP buttons with a single toggle button (startStopButton).
MainActivity.kt updated accordingly (single click listener, isLogging flag, dynamic label).
Key decision added: before generating drop-in update for any file, current version must be pasted.

OPEN ISSUES

Add one more .csv file in which all the latest values from all four sensors are logged.  We keep latest readings, including timestamps from each sensor and when any of the sensors is updated we log into this new file 1) system timestamp 2) sixteen latest values, four from each sensor, 3) the latest P.

DONE TODAY

Switched to single START/STOP toggle in UI and code.
Verified azimuth persistence and normalization logic remains unchanged.
Updated summary with new process guardrail.
Verified STOP behavior: pressing STOP halts SensorLoggerService and logging ceases (confirmed via logcat).

ENVIRONMENT SETUP

Initially, JAVA_HOME was not set; builds failed.
Installed Oracle JDK 17 on Windows and set JAVA_HOME:
C:\Program Files\Java\jdk-17
PATH updated to include %JAVA_HOME%\bin.
Android Studio JBR present at:
C:\Program Files\Android\Android Studio\jbr
(Gradle forced to use real JDK via org.gradle.java.home.)
Removed reliance on "C:\Program Files\Common Files\Oracle\Java\javapath".

GRADLE AND BUILD TOOLS

Gradle wrapper: 8.6
Kotlin: 1.9.20 (from Gradle -v)
Fixed malformed distribution URL in gradle-wrapper.properties earlier.
Forced Gradle JDK:
org.gradle.java.home=C:\ Program Files\Java\jdk-17
settings.gradle uses google() and mavenCentral().

APP AND SDK CONFIGURATION

compileSdk 34
defaultConfig: minSdk 26, targetSdk 34
Java/Kotlin levels: Java 17, jvmTarget 17
Dependencies (core set):
implementation 'androidx.core:core-ktx:1.12.0'
implementation 'androidx.core:core:1.12.0'
implementation 'androidx.appcompat:appcompat:1.6.1'
implementation 'com.google.android.material:material:1.9.0'
implementation 'androidx.constraintlayout:constraintlayout:2.1.4'
implementation 'androidx.activity:activity-ktx:1.8.2'
implementation 'org.jetbrains.kotlinx:kotlinx-coroutines-android:1.7.1'
ViewBinding: ON
Data Binding: OFF
No Room, Retrofit, or Compose.

ANDROIDMANIFEST

Removed package="com.example.sensorlogger" (namespace set in Gradle).
Added:
<uses-permission android:name="android.permission.WAKE_LOCK" />

BUILD AND RUN PROGRESS

Resolved Gradle transform cache issues by killing java.exe and deleting .gradle\caches\transforms-4.
Resolved jlink/JBR issue by forcing Gradle to use JDK 17.
Builds succeed; app deploys and runs on device.
STOP behavior verified: pressing STOP in the UI stopped SensorLoggerService; no further rows appended to CSV files.
Device connection issue (USB/Wiâ€‘Fi): After attempting to connect a different phone, SM-G930V did not appear in the device list despite reconnecting USB, restarting the phone and Android Studio, confirming Developer Options were on, and using Connection Assistant actions (Rescan Devices, Restart ADB Server). Switching to a different laptop USB port immediately made SM-G930V appear. Workaround noted: try a different USB port if the device is missing.

PHYSICAL DEVICE TESTING

Device: Samsung SM-G930V (Android 8.0, API 26)
App runs; START/STOP toggle works; CSV files generated and copied from device.

KEY DECISIONS AND PREFERENCES

Keep project minimal and focused.
Only essential libraries; avoid optional tech unless explicitly requested.
Before generating drop-in update for any file, the current version of that file must first be pasted/provided in the chat to prevent unintended changes and ensure consistency.
